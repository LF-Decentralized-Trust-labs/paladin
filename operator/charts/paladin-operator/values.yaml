# Installation mode: determines the default resources to deploy when installing this chart.
# Available options:
# - devnet (default): Deploys a complete Paladin network (default: 3 nodes), including Domains and Smart Contract CRs.
# - basenet: Deploys only Smart Contract CRs without Domains or Paladin nodes.
# - none / operator-only (or leave empty): Deploys only the Paladin operator without additional resources.
mode: devnet

# Number of Paladin to deploy. Relevant only when mode is set to "devnet".
nodeCount: 3

# Number of besu nodes to deploy. When not set, defaults to 1.
besuNodeCount: 3

# Default values for paladin-operator
operator:
  name: paladin-operator
  namespace: "" # DEPRECATED: Use the namespace field in the HelmRelease instead. e.g. helm install ... --namespace <namespace>
  image:
    repository: ghcr.io/lf-decentralized-trust-labs/paladin-operator
    tag: main
    pullPolicy: Always

  serviceAccount:
    create: true
    automount: true
    annotations: {}

  podSecurityContext:
    runAsNonRoot: true

  securityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]

  livenessProbe:
    httpGet:
      path: /healthz
      port: 8081
      scheme: HTTP
  readinessProbe:
    httpGet:
      path: /readyz
      port: 8081
      scheme: HTTP

  resources:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 64Mi

  env:
    - name: CONFIG_PATH
      value: /etc/config

  # Volumes configuration
  volumes:
  - name: config
    configMap:
      name: paladin-operator     

  volumeMounts:
  - name: config
    mountPath: /etc/config/config.json    # Where the file will be mounted in the container
    subPath: config.json                  # The key (file) from the ConfigMap to mount
                     
  labels:
    control-plane: controller-manager

  annotations: {}

  nodeSelector: {}
  tolerations: []
  affinity: {}

  service:
    type: ClusterIP
    port: 80

  configMap:
    # Referring to the external config.yaml file
    dataFile: assets/config.json
# Prometheus dependencies
prometheus:
  enabled: false
  prometheus:
    namespace: prometheus 
  alertmanager:
    enabled: false 
  server:
    enabled: false
  pushgateway:
    enabled: false  # Enable if you need the push gateway

postgres: # the postgres container runs as a sidecar to the paladin container
  image:
    repository: postgres
    tag: 17.6
    pullPolicy: IfNotPresent

# Smart Contracts References
# Only used when mode is "attach" to join an existing network.
# - Set 'address' to join an existing deployment from another operator.
smartContractsReferences:
  notoFactory:
    address: ""
  zetoFactory:
    address: ""
  penteFactory:
    address: ""
  registry:
    address: ""

# Smart Contract Deployments Configuration
# Controls the signing keys for smart contract deployments.
# If a 'from' key is set for a specific contract, that value is used.
# If not set, it falls back to the value in 'default'.
# If default not set, it falls back to the value set by the operator
smartContractDeployments:
  default:
    from: ""
  registry:
    from: ""
  notoFactory:
    from: ""
  penteFactory:
    from: ""
  zetoG16Anon:
    from: ""
  zetoG16AnonBatch:
    from: ""
  zetoG16AnonEnc:
    from: ""
  zetoG16AnonEncBatch:
    from: ""
  zetoG16AnonNullifierTransfer:
    from: ""
  zetoG16AnonNullifierTransferBatch:
    from: ""
  zetoG16AnonNullifierKycTransfer:
    from: ""
  zetoG16AnonNullifierKycTransferBatch:
    from: ""
  zetoG16AnonNullifierKycTransferLocked:
    from: ""
  zetoG16AnonNullifierKycTransferLockedBatch:
    from: ""
  zetoG16Deposit:
    from: ""
  zetoG16Withdraw:
    from: ""
  zetoG16WithdrawBatch:
    from: ""
  zetoG16WithdrawNullifier:
    from: ""
  zetoG16WithdrawNullifierBatch:
    from: ""
  zetoPoseidonUnit2l:
    from: ""
  zetoPoseidonUnit3l:
    from: ""
  zetoSmtLib:
    from: ""
  zetoImplAnon:
    from: ""
  zetoImplAnonEnc:
    from: ""
  zetoImplAnonNullifier:
    from: ""
  zetoImplAnonNullifierKyc:
    from: ""
  zetoFactory:
    from: ""

# Transaction Invoke Configuration
# Controls the signing keys for transaction invocations.
# If a 'from' key is set for a specific transaction, that value is used.
# If not set, it falls back to the value in 'default'.
# If default not set, it falls back to the value set by the operator
transactionInvokes:
  default:
    from: ""
  zetoAnon:
    from: ""
  zetoAnonEnc:
    from: ""
  zetoAnonNullifier:
    from: ""
  zetoAnonNullifierKyc:
    from: ""

    
# Install CRDs as part of the chart installation
# When this is set to false, the CRDs are expected to be installed separately
installCRDs: false

# Setting for devnet mode 
paladin:
  nodeNamePrefix: node
  image:
    repository: ghcr.io/lf-decentralized-trust-labs/paladin
    tag: main
    pullPolicy: Always
  labels:
    app: paladin
  baseNodePort: 31548

# Setting for devnet mode 
besu:
  nodeNamePrefix: node
  image:
    repository: hyperledger/besu
    tag: 25.8.0
    pullPolicy: IfNotPresent
  labels:
    app: besu
  baseNodePort: 31545

# Domains can be configured with a default signing identity
domains:
  noto:
    fixedSigningIdentity: ""
  pente:
    fixedSigningIdentity: ""
  zeto:
    fixedSigningIdentity: ""