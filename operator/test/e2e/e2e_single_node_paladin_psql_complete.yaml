apiVersion: core.paladin.io/v1alpha1
kind: Paladin
metadata:
  name: {{ .name }}
spec:
  config: |
    log:
      level: info
    domains:
      pente:
        plugin:
          type: jar
          library: /app/domains/pente.jar
          class: io.kaleido.paladin.pente.domain.PenteDomain
        registryAddress: {{ .penteRegistryAddress }}
      noto:
        plugin:
          type: c-shared
          library: /app/domains/libnoto
        registryAddress: {{ .notoRegistryAddress }}
    registries:
      evm:
        plugin:
          type: c-shared
          library: /app/registries/evm
        config:
          registryAddress: {{ .nodeRegistryAddress }}
  database:
    mode: sidecarPostgres
    migrationMode: auto
  besuNode: {{ .name }}
  secretBackedSigners:
    - name: signer-1
      secret: node1.keys
      type: autoHDWallet
  service:
    type: NodePort
    ports:
    - name: rpc-http
      port: 8548
      nodePort: 31548 # see paladin-kind.yaml
    - name: rpc-ws
      port: 8549
      nodePort: 31549 # see paladin-kind.yaml
